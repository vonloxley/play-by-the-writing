# espanso match file
# Author: JeansenVaars
# Consider inviting me a Coffee, this took quite some work! -> https://ko-fi.com/JeansenVaars
# Check out my Blog -> https://jvhouse.xyz/
# USE AT YOUR OWN RISK

matches:
  - trigger: ":help"
    label: "Help"
    replace: "{{form.nothing}}"
    vars:
      - name: "form"
        type: form
        params:
          layout: |
            Dice icon â†’ :dd
            Arrow icon â†’ :arr
            Dice roll â†’ :r1d6.
            Dice roll+ â†’ :rr1d6x+4.
            Fudge roll â†’ :df.
            Fudge roll+ â†’ :df+4.
            Poker shuffle â†’ :shuffle
            Poker draw â†’ :draw
            Tarot draw â†’ :tarot
            Roll table â†’ :list or :tables
            Roll w. tables â†’ :wlist or :wtables
            Complete AI â†’ :aicomplete
  - triggers: [":dd"]
    label: "Dice symbol"
    replace: "ðŸŽ²"
  - triggers: [":arr"]
    label: "Arrow symbol"
    replace: "â†’"
  # Roll simple dice - :r1d6
  - regex: ":r(?P<quantity>\\d+)d(?P<size>\\d+)\\."
    replace: "{{output}}"
    vars:
      - name: output
        type: script
        params:
          args:
            - "%CONFIG%/match/packages/playbtw/scripts/playbtw_core"
            - roll_dice
            - --quantity
            - "{{quantity}}"
            - --size
            - "{{size}}"
  # Roll dice - PRO mode (Read the docs)
  - regex: ":rr(?P<formula>.*)\\."
    replace: "{{output}}"
    vars:
      - name: output
        type: script
        params:
          args:
            - "%CONFIG%/match/packages/playbtw/scripts/playbtw_core"
            - roll_advanced
            - --formula
            - "{{formula}}"
  # Roll fudge.
  - trigger: ":df."
    label: "FATE Fudge dice"
    replace: "{{output}}"
    vars:
      - name: output
        type: script
        params:
          args:
            - "%CONFIG%/match/packages/playbtw/scripts/playbtw_core"
            - roll_fudge
  # Roll fudge with bonus.
  - regex: ":df(?P<mods>[+-]?\\d+)\\."
    replace: "{{output}}"
    vars:
      - name: output
        type: script
        params:
          args:
            - "%CONFIG%/match/packages/playbtw/scripts/playbtw_core"
            - roll_fudge
            - --mods
            - "{{mods}}"
# Roll genesys.
  - triggers: [":genesys", ":gend"]
    label: "Genesys dice roller"
    replace: "{{output}}"
    vars:
      - name: form_gen
        type: form
        params:
          layout: |
            Genesys dice roller
            Ability    Proficiency     Boost
            [[gen_a]] [[gen_p]] [[gen_b]]
            Difficulty    Challenge     Setback
            [[gen_d]] [[gen_c]] [[gen_s]]
          fields:
            gen_a:
              type: list
              values:
                - '0'
                - '1'
                - '2'
                - '3'
                - '4'
                - '5'
              default:
                '0'
            gen_p:
              type: list
              values:
                - '0'
                - '1'
                - '2'
                - '3'
                - '4'
                - '5'
              default:
                '0'
            gen_b:
              type: list
              values:
                - '0'
                - '1'
                - '2'
                - '3'
                - '4'
                - '5'
              default:
                '0'
            gen_d:
              type: list
              values:
                - '0'
                - '1'
                - '2'
                - '3'
                - '4'
                - '5'
              default:
                '0'
            gen_c:
              type: list
              values:
                - '0'
                - '1'
                - '2'
                - '3'
                - '4'
                - '5'
              default:
                '0'
            gen_s:
              type: list
              values:
                - '0'
                - '1'
                - '2'
                - '3'
                - '4'
                - '5'
              default:
                '0'
      - name: output
        type: script
        params:
          args:
            - "%CONFIG%/scripts/playbtw_core"
            - roll_genesys
            - --gen_a
            - "{{form_gen.gen_a}}"
            - --gen_p
            - "{{form_gen.gen_p}}"
            - --gen_b
            - "{{form_gen.gen_b}}"
            - --gen_d
            - "{{form_gen.gen_d}}"
            - --gen_c
            - "{{form_gen.gen_c}}"
            - --gen_s
            - "{{form_gen.gen_s}}"
  # Draw from card deck (no replacement)
  - triggers: [":draw", ":card"]
    label: "Draw from card deck"
    replace: "{{output}}"
    vars:
      - name: output
        type: script
        params:
          args:
            - "%CONFIG%/match/packages/playbtw/scripts/playbtw_core"
            - draw
            - --table
            - "poker_deck"
  # Draw from card deck (no replacement)
  - triggers: [":tarot"]
    replace: "{{output}}"
    vars:
      - name: output
        type: script
        params:
          args:
            - "%CONFIG%/match/packages/playbtw/scripts/playbtw_core"
            - tarot
  # Draw from card deck (no replacement)
  - trigger: ":shuffle"
    label: "Shuffle deck"
    replace: "{{output}}"
    vars:
      - name: output
        type: script
        params:
          args:
            - "%CONFIG%/match/packages/playbtw/scripts/playbtw_core"
            - shuffle
            - --table
            - "poker_deck"
  # Roll from weighted random table of two columns. Without .txt
  - regex: ":tt\\.(?P<table>.*)\\."
    replace: "{{output}}"
    vars:
      - name: output
        type: script
        params:
          args:
            - "%CONFIG%/match/packages/playbtw/scripts/playbtw_core"
            - table
            - --table
            - "{{table}}"
  # Roll from weighted random table of two columns. Pipe | Separated. Without .psv
  - regex: ":wt\\.(?P<table>.*)\\."
    replace: "{{output}}"
    vars:
      - name: output
        type: script
        params:
          args:
            - "%CONFIG%/match/packages/playbtw/scripts/playbtw_core"
            - wtable
            - --table
            - "{{table}}"
  # Search available tables with keyword for example :list2.mythic. - include search criteria between the dots
  - regex: ":list[1]?\\.(?P<contains>\\w*)\\."
    replace: "{{output}}"
    vars:
      - name: files
        type: script
        params:
          args:
            - "%CONFIG%/match/packages/playbtw/scripts/playbtw_core"
            - list
            - --contains
            - "{{contains}}"
      - name: form1
        type: form
        params:
          layout: |
            Select random table:
            [[file1]]
          fields:
            file1:
              type: list
              values: "{{files}}"
      - name: output
        type: script
        params:
          args:
            - "%CONFIG%/match/packages/playbtw/scripts/playbtw_core"
            - table
            - --table
            - "{{form1.file1}}"
  # Search available tables
  - regex: ":list2\\.(?P<contains>\\w*)\\."
    replace: "{{output}}"
    vars:
      - name: files
        type: script
        params:
          args:
            - "%CONFIG%/match/packages/playbtw/scripts/playbtw_core"
            - list
            - --contains
            - "{{contains}}"
      - name: form1
        type: form
        params:
          layout: |
            Select random table:
            [[file1]]
            [[file2]]
          fields:
            file1:
              type: list
              values: "{{files}}"
            file2:
              type: list
              values: "{{files}}"
      - name: output
        type: script
        params:
          args:
            - "%CONFIG%/match/packages/playbtw/scripts/playbtw_core"
            - table
            - --table
            - "{{form1.file1}},{{form1.file2}}"
  # Search available tables
  - regex: ":list3\\.(?P<contains>\\w*)\\."
    replace: "{{output}}"
    vars:
      - name: files
        type: script
        params:
          args:
            - "%CONFIG%/match/packages/playbtw/scripts/playbtw_core"
            - list
            - --contains
            - "{{contains}}"
      - name: form1
        type: form
        params:
          layout: |
            Select random table:
            [[file1]]
            [[file2]]
            [[file3]]
          fields:
            file1:
              type: list
              values: "{{files}}"
            file2:
              type: list
              values: "{{files}}"
            file3:
              type: list
              values: "{{files}}"
      - name: output
        type: script
        params:
          args:
            - "%CONFIG%/match/packages/playbtw/scripts/playbtw_core"
            - table
            - --table
            - "{{form1.file1}},{{form1.file2}},{{form1.file3}}"
  # Search available tables with keyword
  - regex: ":wlist[1]?\\.(?P<contains>\\w*)\\."
    replace: "{{output}}"
    vars:
      - name: files
        type: script
        params:
          args:
            - "%CONFIG%/match/packages/playbtw/scripts/playbtw_core"
            - wlist
            - --contains
            - "{{contains}}"
      - name: form1
        type: form
        params:
          layout: |
            Select random table:
            [[file1]]
          fields:
            file1:
              type: list
              values: "{{files}}"
      - name: output
        type: script
        params:
          args:
            - "%CONFIG%/match/packages/playbtw/scripts/playbtw_core"
            - wtable
            - --table
            - "{{form1.file1}}"
  # Search available tables
  - regex: ":wlist2\\.(?P<contains>\\w*)\\."
    replace: "{{output}}"
    vars:
      - name: files
        type: script
        params:
          args:
            - "%CONFIG%/match/packages/playbtw/scripts/playbtw_core"
            - wlist
            - --contains
            - "{{contains}}"
      - name: form1
        type: form
        params:
          layout: |
            Select random table:
            [[file1]]
            [[file2]]
          fields:
            file1:
              type: list
              values: "{{files}}"
            file2:
              type: list
              values: "{{files}}"
      - name: output
        type: script
        params:
          args:
            - "%CONFIG%/match/packages/playbtw/scripts/playbtw_core"
            - wtable
            - --table
            - "{{form1.file1}},{{form1.file2}}"
  # Search available tables
  - regex: ":wlist3\\.(?P<contains>\\w*)\\."
    replace: "{{output}}"
    vars:
      - name: files
        type: script
        params:
          args:
            - "%CONFIG%/match/packages/playbtw/scripts/playbtw_core"
            - wlist
            - --contains
            - "{{contains}}"
      - name: form1
        type: form
        params:
          layout: |
            Select random table:
            [[file1]]
            [[file2]]
            [[file3]]
          fields:
            file1:
              type: list
              values: "{{files}}"
            file2:
              type: list
              values: "{{files}}"
            file3:
              type: list
              values: "{{files}}"
      - name: output
        type: script
        params:
          args:
            - "%CONFIG%/match/packages/playbtw/scripts/playbtw_core"
            - wtable
            - --table
            - "{{form1.file1}},{{form1.file2}},{{form1.file3}}"
